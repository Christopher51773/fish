<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>An Overview of the fish Command Line for Fluidinfo &mdash; fish v4.00 documentation</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '4.00',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="top" title="fish v4.00 documentation" href="index.html" />
    <link rel="next" title="Shell-Fish: The Online version of Fish" href="shell-fish.html" />
    <link rel="prev" title="The fish Command Line for Fluidinfo" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="shell-fish.html" title="Shell-Fish: The Online version of Fish"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="The fish Command Line for Fluidinfo"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">fish v4.00 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="an-overview-of-the-fish-command-line-for-fluidinfo">
<h1>An Overview of the fish Command Line for Fluidinfo<a class="headerlink" href="#an-overview-of-the-fish-command-line-for-fluidinfo" title="Permalink to this headline">¶</a></h1>
<div class="section" id="a-brief-overview-of-fluidinfo">
<h2>A Brief Overview of Fluidinfo<a class="headerlink" href="#a-brief-overview-of-fluidinfo" title="Permalink to this headline">¶</a></h2>
<p>Fluidinfo is a simple, shared, online storage system in which each
there are a set of objects, each of which can optionally be <em>about</em>
something, and information is stored by tagging objects.
Tags belong to users, and have names.   Tags may store information
simply by being present or absent, or they may have values.
Thus I  can indicate that I have read a book by attaching a tag
called <tt class="docutils literal"><span class="pre">have-read</span></tt> to the object corresponding to that book,
or I can rate it by attaching a <tt class="docutils literal"><span class="pre">rating</span></tt> tag with a numeric value
to the object.   Tag owners can set permissions on their tags
to control who can see them and who can alter/use them.
So tags are owned and are subject to a permissions system and policies,
while all objects are shared.</p>
</div>
<div class="section" id="overview-of-the-command-line">
<h2>Overview of the Command Line<a class="headerlink" href="#overview-of-the-command-line" title="Permalink to this headline">¶</a></h2>
<p>The fish command line is a acts as a sort-of one-shot command shell
for Fluidinfo.   It gives access to much of the functionality of
the underlying <tt class="docutils literal"><span class="pre">fish.py</span></tt> library, with a main focus on tagging,
getting tag values, finding tags, querying Fluidinfo and clearing
(removing tags).
It also has some facilities for listing tags and viewing and
altering their permissions.</p>
<p>Assuming you have installed <tt class="docutils literal"><span class="pre">fish.py</span></tt>, set up a credentials file,
and created an alias <tt class="docutils literal"><span class="pre">fish</span></tt> to run it, basic use is exemplified
as follows.   In the examples that follow, I assume that the Fluidinfo
user has username <tt class="docutils literal"><span class="pre">alice</span></tt>.   All tags belonging to alice start <tt class="docutils literal"><span class="pre">alice/</span></tt>.
(<tt class="docutils literal"><span class="pre">fish</span></tt> actually has a configuration option to allow this to be omitted,
but for now we&#8217;ll specify the user explicitly, since that is normal
in Fluidinfo.)</p>
<blockquote>
<ol class="arabic">
<li><p class="first">Rate the Eiffel Tower as a 9:</p>
<div class="highlight-python"><pre>$ fish tag -a "Eiffel Tower" rating=9</pre>
</div>
</li>
<li><p class="first">Show the my rating and ntoll&#8217;s rating of the &#8220;Eiffel Tower&#8221;.</p>
<div class="highlight-python"><pre>$ fish show -a "Eiffel Tower"  /about  rating  /ntoll/rating
Object with about="Eiffel Tower":
/objects/93bd1999-0998-49cc-8004-af457ce34ce4
alice/rating = 9
fluiddb/about = "Eiffel Tower"
ntoll/rating = "I prefer the one in Blackpool"</pre>
</div>
</li>
<li><p class="first">Show all the tags on the &#8220;Eiffel Tower&#8221; (now referenced by ID):</p>
<div class="highlight-python"><pre>$ fish tags -i 93bd1999-0998-49cc-8004-af457ce34ce4
Object with id=93bd1999-0998-49cc-8004-af457ce34ce4:
alice/rating = 9
ntoll/rating = "I prefer the  the one in Blackpool"
alice/location = "Paris"
alice/indexed/about
fluiddb/about = "Eiffel Tower"</pre>
</div>
</li>
<li><p class="first">Add a <tt class="docutils literal"><span class="pre">dislike</span></tt> tag to each object that I have rated 1 or 0
and then show their about tags.</p>
<div class="highlight-python"><pre>$ fish tag -q 'alice/rating &lt; 2' dislike
$ fish show -q 'has alice/dislike' /about rating dislike
5 objects matched
Object a98f2c80-ae5f-405a-a319-d47122ae9da3:
  fluiddb/about = "book:foucaults pendulum (umberto eco)"
  alice/rating = 1
  alice/dislike = True
Object 5157c69e-ceaf-4e7c-9423-d67751d029d3:
  fluiddb/about = "The_Beatles"
  alice/rating = 1
  alice/dislike = True
Object 1ab066e8-c2a1-4769-9121-e3346849e7e4:
  fluiddb/about = "book:beloved (toni morrison)"
  alice/rating = 1
  alice/dislike = True
Object ff873602-e9a8-4f9a-a7d4-c0cfc394a120:
  fluiddb/about = "book:the lord of the rings (jrr tolkien)"
  alice/rating = 1
  alice/dislike = True
Object 7aed1e67-a88e-439d-8a56-b2ab52c838ab:
  fluiddb/about = "book:oranges are not the only fruit (jeanette winterson)"
  alice/rating = 0
  alice/dislike = True</pre>
</div>
</li>
</ol>
</blockquote>
<p>Before describing these commands in detail, it will be useful
to describe the abstraction <tt class="docutils literal"><span class="pre">fish</span></tt> uses, as it differs in key
respects from the underlying Fluidinfo model.</p>
</div>
<div class="section" id="the-fish-abstraction">
<h2>The fish Abstraction<a class="headerlink" href="#the-fish-abstraction" title="Permalink to this headline">¶</a></h2>
<p>The Fluidinfo API is quite low level and rigid;
<tt class="docutils literal"><span class="pre">fish</span></tt> offers a slightly higher level of abstraction.
Here, we briefly note the differences.</p>
<blockquote>
<ul>
<li><p class="first">In the Fluidinfo API, you can&#8217;t simply tag an object with
an <tt class="docutils literal"><span class="pre">alice/rating</span></tt> tag; you first have to tell the system that you
wish to use a <tt class="docutils literal"><span class="pre">rating</span></tt> tag by <tt class="docutils literal"><span class="pre">creating</span></tt> it; only once you
have done this can you use it.</p>
<p>In <tt class="docutils literal"><span class="pre">fish</span></tt>, you can just go ahead and set a tag; if it doesn&#8217;t
exist, the system will create it for you.</p>
</li>
<li><p class="first">Fluidinfo supports <em>namespaces</em>; a namespace is to a tag much
like a directory or folder is to a file, i.e. tags live in
namespaces and you can have different tags with the same name in
different namspaces, just as you can have two files with the same
name in different folders.   User Jacqui (username <tt class="docutils literal"><span class="pre">jacqui</span></tt>)
has a namespace
<tt class="docutils literal"><span class="pre">jacqui</span></tt>, and she can create tags (&#8220;top-level tags&#8221;) in that
namespace.   Jacqui may, however, wish to group tags into sets
using namespaces.   For example, she may wish to have some private
tags that all live in a namespace called <tt class="docutils literal"><span class="pre">private</span></tt>.   So she might
have a private rating tag called <tt class="docutils literal"><span class="pre">jacqui/private/rating</span></tt>.
As with tags, Fluidinfo first requires jacqui to create the <tt class="docutils literal"><span class="pre">private</span></tt>
namespace before she can create the <tt class="docutils literal"><span class="pre">jacqui/private/rating</span></tt> tag.
So to use <tt class="docutils literal"><span class="pre">jacqui/private/rating</span></tt> for the first time, using the
API directly, the process would be:</p>
<blockquote>
<ol class="arabic simple">
<li>Create the namespace <tt class="docutils literal"><span class="pre">private</span></tt> under <tt class="docutils literal"><span class="pre">jacqui</span></tt></li>
<li>Create the tag <tt class="docutils literal"><span class="pre">rating</span></tt></li>
<li>Tag the relevant object with <tt class="docutils literal"><span class="pre">rating</span></tt>.</li>
</ol>
</blockquote>
</li>
</ul>
<blockquote>
<p>Again, <tt class="docutils literal"><span class="pre">fish</span></tt> takes care of all that, and allows jacqui just
to say:</p>
<div class="highlight-python"><pre>fish tag -a "Eiffel Tower" jacqui/rating=10</pre>
</div>
<p><tt class="docutils literal"><span class="pre">fish</span></tt> will create any tags and namespaces required on the fly.</p>
</blockquote>
<ul class="simple">
<li>Finally, in Fluidinfo itself, the object ID (128-bit number,
usually formatted as a hex-number in 8-4-4-4-12 digit groups)
is not actually a tag on the object.   <tt class="docutils literal"><span class="pre">fish</span></tt> allows the user
to use refer to it as a tag, at least for reporting purposes,
using the name <tt class="docutils literal"><span class="pre">/id</span></tt>.</li>
</ul>
</blockquote>
</div>
<div class="section" id="the-anatomy-of-the-core-fish-commands">
<h2>The Anatomy of the core fish Commands<a class="headerlink" href="#the-anatomy-of-the-core-fish-commands" title="Permalink to this headline">¶</a></h2>
<p>The general form of the core fish commands is:</p>
<div class="highlight-python"><pre>fish &lt;verb&gt; [flags] &lt;object selector&gt; &lt;tags/values&gt;</pre>
</div>
<p>The verb says what you want to do.   The main verbs currently avalaible are</p>
<blockquote>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">tag</span></tt> &#8212; set tags on some objects</li>
<li><tt class="docutils literal"><span class="pre">show</span></tt> &#8212; show tag values from some objects</li>
<li><tt class="docutils literal"><span class="pre">untag</span></tt> &#8212; remove tags from some objects</li>
<li><tt class="docutils literal"><span class="pre">tags</span></tt> &#8212; show what readable tags an object has</li>
<li><tt class="docutils literal"><span class="pre">count</span></tt> &#8212; count the number of objects match some criterion.</li>
</ul>
</blockquote>
<p>The optional <tt class="docutils literal"><span class="pre">flags</span></tt> modify the command.   The main ones used are:</p>
<blockquote>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">-v</span></tt> &#8212; verbose (gives extra information)</li>
<li><tt class="docutils literal"><span class="pre">-s</span></tt> &#8212; to specify that the command should operate againss the sandbox
(<tt class="docutils literal"><span class="pre">sandbox.fluidinfo.com</span></tt>) rather than the main Fluidinfo instance
(<tt class="docutils literal"><span class="pre">fluiddb.fluidinfo.com</span></tt>); this is mostly used for testing.</li>
<li><tt class="docutils literal"><span class="pre">-U</span></tt> &#8212; use unix-style paths (overriding configuration and default;
see below)</li>
<li><tt class="docutils literal"><span class="pre">-F</span></tt> &#8212; use Fluidinfo-style paths (overriding configuration and
default; see below)</li>
<li><tt class="docutils literal"><span class="pre">-u</span> <span class="pre">userspec</span></tt> &#8212; if you have multiple Fluidinfo accounts, this
specifies an alternate credentials file to use, normally identified
by the username (see below).</li>
</ul>
</blockquote>
<p>The <tt class="docutils literal"><span class="pre">&lt;object</span> <span class="pre">selector&gt;</span></tt> is used to specify which objects you are interested
in and usually takes on of three forms:</p>
<blockquote>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">-a</span> <span class="pre">&quot;about</span> <span class="pre">tag</span> <span class="pre">value&quot;</span></tt> is used to specify an object on the basis of
its about tag (<tt class="docutils literal"><span class="pre">fluiddb/about</span></tt>).   For example,
<tt class="docutils literal"><span class="pre">-a</span> <span class="pre">&quot;book:nineteen</span> <span class="pre">eighty</span> <span class="pre">four</span> <span class="pre">(george</span> <span class="pre">orwell)&quot;</span></tt> specifies an important
book by George Orwell.</li>
<li><tt class="docutils literal"><span class="pre">-i</span> <span class="pre">ID</span></tt> is used to specify an object on the basis of its
ID (expressed as a hex string, appropriately formatted).
For example, <tt class="docutils literal"><span class="pre">-i</span> <span class="pre">93bd1999-0998-49cc-8004-af457ce34ce4</span></tt>
specifies the object with this ID, which happens to be the
on with the about tag <tt class="docutils literal"><span class="pre">Eiffel</span> <span class="pre">Tower</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">-q</span> <span class="pre">&quot;fluidinfo</span> <span class="pre">query&quot;</span></tt> is used to specify a set of objects
on the basis of a query expressed in the Fluidinfo query language.
For example <tt class="docutils literal"><span class="pre">-q</span> <span class="pre">has</span> <span class="pre">alice/rating</span></tt> specifies objects that have
an <tt class="docutils literal"><span class="pre">alice/rating</span></tt> rag on them.</li>
</ul>
</blockquote>
<p>Finally, some commands need or accept a list of tags or tag-value pairs.
Specifically, <tt class="docutils literal"><span class="pre">show</span></tt> and <tt class="docutils literal"><span class="pre">untag</span></tt> both require a list of tags to be
shown or removed, and <tt class="docutils literal"><span class="pre">tag</span></tt> requires a set of tag-value pairs to know
what tags to set.   Tag value pairs usually take the form:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">tag</span><span class="o">=</span><span class="n">value</span>
</pre></div>
</div>
<p>so that a list of them might be</p>
<div class="highlight-python"><pre>rating=9 description="fabulous" seen=true price=18.77</pre>
</div>
<p>Don&#8217;t put spaces around equals signs assigning tag values: it won&#8217;t work.</p>
<p>In general, strings should be in double quotes <tt class="docutils literal"><span class="pre">&quot;like</span> <span class="pre">this&quot;</span></tt>,
booleans should be <tt class="docutils literal"><span class="pre">true</span></tt>,
<tt class="docutils literal"><span class="pre">false</span></tt>, <tt class="docutils literal"><span class="pre">t</span></tt> or <tt class="docutils literal"><span class="pre">f</span></tt> (unquoted) and numbers should just be plain numbers
like 3 or 4.7.
All strings are always unicode, i.e. they may contain any character.</p>
<p>It is also possible to set a tag without a value by just giving a tag name.</p>
</div>
<div class="section" id="invoking-fish-as-a-shell">
<h2>Invoking Fish as a Shell<a class="headerlink" href="#invoking-fish-as-a-shell" title="Permalink to this headline">¶</a></h2>
<p>If Fish is invoked without any arguments, simply by typing</p>
<div class="highlight-python"><pre>$ fish</pre>
</div>
<p>then Fish starts as an interactive shell in which the user can
enter a commands without the <tt class="docutils literal"><span class="pre">fish</span></tt> prefix at the start of the line.
For example:</p>
<div class="highlight-python"><pre>$ fish
This is fish version 3.10.
&gt; pwd
alice
&gt; show -a 'book:alices adventures in wonderland (lewis carroll)' rating
Object with about="book:alices adventures in wonderland (lewis carroll)":
alice/rating = 10
&gt; quit</pre>
</div>
<p>Key things to know about the interactive shell are:</p>
<blockquote>
<ul>
<li><p class="first">When the <tt class="docutils literal"><span class="pre">readline</span></tt> library is available, it will be used,
meaning that you will be able to use either Emacs key bindings or
the arrow keys to edit the command line, including moving up and
down through the command history.</p>
</li>
<li><p class="first">Again, if the <tt class="docutils literal"><span class="pre">readline</span></tt> library is available, a <tt class="docutils literal"><span class="pre">history</span></tt>
command will be available, to show you previous commands that
you have used in the session; this may also be abbreviated
to <tt class="docutils literal"><span class="pre">h</span></tt>.</p>
</li>
<li><p class="first">Quoting and escaping follow the following rules:</p>
<blockquote>
<ul>
<li><p class="first">Either single or double quotes can be used to make compound
arguments; single quotes can be enclosed in double quotes
and double quotes can be enclosed in single quotes, e.g.</p>
<div class="highlight-python"><pre>tag -a "Occam's Razor" comment="I'm a believer"
tag -a 'The "double" quote' comment='Is "doubleplusgood"'</pre>
</div>
</li>
<li><p class="first">The escape character is blackslash (<tt class="docutils literal"><span class="pre">\</span></tt>), which can be
used to escape quotes or backslashes.   For example,
this command:</p>
<div class="highlight-python"><pre>tag -a "The \"backslash\" (\\) character" comment="is used for escaping"</pre>
</div>
<p>tags the object with about tag <tt class="docutils literal"><span class="pre">The</span> <span class="pre">&quot;backslash&quot;</span> <span class="pre">(\)</span> <span class="pre">character</span></tt>.</p>
</li>
<li><p class="first">Left quotes (<em>backticks</em>) can be used to allow command substitution,
whereby the phrase enclosed in backticks is evaluated as a Fish
command and the output of that command replaces the quoted phrase
when the enclosing command is executed.   For example:</p>
<div class="highlight-python"><pre>tag -a "`about book 'Animal Farm' 'George Orwell'`" rating=10</pre>
</div>
<p>tags the object with about tag <tt class="docutils literal"><span class="pre">book:animal</span> <span class="pre">farm</span> <span class="pre">(george</span> <span class="pre">orwell)</span></tt>,
since that is the result of the quoted Fish <tt class="docutils literal"><span class="pre">about</span></tt> command.</p>
</li>
</ul>
</blockquote>
</li>
</ul>
</blockquote>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/fish-doc-logo.png" alt="Logo"/>
            </a></p>
            <h3><a href="index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference external" href="">An Overview of the fish Command Line for Fluidinfo</a><ul>
<li><a class="reference external" href="#a-brief-overview-of-fluidinfo">A Brief Overview of Fluidinfo</a></li>
<li><a class="reference external" href="#overview-of-the-command-line">Overview of the Command Line</a></li>
<li><a class="reference external" href="#the-fish-abstraction">The fish Abstraction</a></li>
<li><a class="reference external" href="#the-anatomy-of-the-core-fish-commands">The Anatomy of the core fish Commands</a></li>
<li><a class="reference external" href="#invoking-fish-as-a-shell">Invoking Fish as a Shell</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="index.html"
                                  title="previous chapter">The fish Command Line for Fluidinfo</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="shell-fish.html"
                                  title="next chapter">Shell-Fish: The Online version of Fish</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="_sources/cli.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="shell-fish.html" title="Shell-Fish: The Online version of Fish"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="The fish Command Line for Fluidinfo"
             >previous</a> |</li>
        <li><a href="index.html">fish v4.00 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2011, Nicholas J. Radcliffe.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.2.
    </div>
  </body>
</html>